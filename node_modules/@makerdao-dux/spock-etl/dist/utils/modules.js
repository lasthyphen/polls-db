"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.normalizePath = exports.loadExternalModule = void 0;
const path_1 = require("path");
/**
 * Loads external module. Transpiles it if needed.
 */
function loadExternalModule(_path) {
    const path = normalizePath(_path);
    if (path_1.extname(path) === '.ts') {
        // if we are loading TS file transpile it on the fly
        require('ts-node').register();
    }
    // eslint-disable-next-line
    const module = require(path);
    if (!module.default) {
        throw new Error("Couldn't find default export!");
    }
    return module.default;
}
exports.loadExternalModule = loadExternalModule;
function normalizePath(rawPath) {
    if (path_1.isAbsolute(rawPath)) {
        return rawPath;
    }
    return path_1.join(process.cwd(), rawPath);
}
exports.normalizePath = normalizePath;
//# sourceMappingURL=modules.js.map