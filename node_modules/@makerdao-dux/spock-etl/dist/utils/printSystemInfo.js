"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getVersion = exports.printSystemInfo = void 0;
const lodash_1 = require("lodash");
const logger_1 = require("./logger");
const logger = logger_1.getLogger('system');
function printSystemInfo(config) {
    logger.info(`Starting Spock ETL ver.${getVersion()}`);
    logger.info(`Config for chain ${config.name}:`, maskConfig(config));
}
exports.printSystemInfo = printSystemInfo;
function maskConfig(config) {
    return {
        ...lodash_1.omit(config, 'sentry', 'onStart'),
        // printout simplified extractors/transformers config
        extractors: (config.extractors || []).map((e) => e.name),
        transformers: (config.transformers || []).map((t) => t.name),
        // avoid printing out password
        db: {
            host: config.db.host,
        },
    };
}
function getVersion() {
    return (require('../../package.json') || {}).version;
}
exports.getVersion = getVersion;
//# sourceMappingURL=printSystemInfo.js.map